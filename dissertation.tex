%% 
%% ACS project dissertation template. 
%% 
%% Currently designed for printing two-sided, but if you prefer to 
%% print single-sided just remove ",twoside,openright" from the 
%% \documentclass[] line below. 
%%
%%
%%   SMH, May 2010. 

\newcommand{\wordcount}{\input{|"./wordCount.sh"}}

\documentclass[a4paper,12pt,twoside,openright]{report}
%TC:ignore

%%
%% EDIT THE BELOW TO CUSTOMIZE
%%

\def\authorname{Alexander\ Harri\ Bell-Thomas\xspace}
\def\authorcollege{Jesus College\xspace}
\def\authoremail{Alexander.Bell-Thomas@cl.cam.ac.uk}
\def\dissertationtitle{Trusted Reference Monitors for Linux using Intel SGX Enclaves}
\def\wordcount{0}


%\usepackage[dvips]{epsfig,graphics} 
\usepackage{epsfig,graphicx,verbatim,parskip,tabularx,setspace,xspace,geometry,amssymb,mathtools,url}
\usepackage[tt=false]{libertine}
\usepackage{multirow}
\usepackage{minted}


%% START OF DOCUMENT
\begin{document}


%% FRONTMATTER (TITLE PAGE, DECLARATION, ABSTRACT, ETC) 
\pagestyle{empty}
\singlespacing
\newgeometry{margin=1.4in}
\input{titlepage}
\restoregeometry
\onehalfspacing
\input{declaration}
\singlespacing
\input{abstract}

\pagenumbering{roman}
\setcounter{page}{0}
\pagestyle{plain}
\tableofcontents
\listoffigures
\listoftables

\onehalfspacing

%TC:endignore
%% START OF MAIN TEXT 

\chapter{Introduction}
\pagenumbering{arabic} 
\setcounter{page}{1} 
\input{chapters/introduction}

\chapter{Background} 
\input{chapters/background}

\chapter{Related Work} 
\input{chapters/related}

\chapter{Design and Implementation}
\label{sec:design}
\input{chapters/design}

\chapter{Evaluation} 
\input{chapters/evaluation}

\chapter{Summary and Conclusions} 
\input{chapters/conclusion}

%TC:ignore

\appendix
\singlespacing



\begin{minted}{c}
static asmlinkage void (*_change_pid)(struct task_struct *task, 
                                      enum pid_type type, struct pid *pid);
static asmlinkage struct pid* (*_alloc_pid)(struct pid_namespace *ns);

static ssize_t change_pid(void)
{
    struct pid* newpid = _alloc_pid(task_active_pid_ns(current));
    _change_pid(current, PIDTYPE_PID, newpid);
    /* current->pid has changed. */
}

static int __init module_init(void)
{
    _change_pid = find_sym("change_pid");
    _alloc_pid = find_sym("alloc_pid");
    /* ... */
    /* On SysFS call execute change_pid(void) */
    return 0;
}

\end{minted}

\bibliographystyle{unsrt} 
\bibliography{references} 

%TC:endignore
\end{document}
